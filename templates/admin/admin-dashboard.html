{% extends 'admin/base_admin.html' %}

{% block title %}Admin Dashboard | Aethereal{% endblock %}

{% block admin_content %}
    <div class="admin-header">
        <div>
            <h2 style="font-family: 'Playfair Display', serif; font-size: 32px; color: #1a1a1a; margin-bottom: 8px;">Dashboard Overview</h2>
            <p style="color: #666; font-size: 14px;">Welcome back, Admin. Here's what's happening today.</p>
        </div>
        <div style="text-align: right;">
            <span style="display: block; font-size: 13px; color: #888; text-transform: uppercase; letter-spacing: 1px;">Today's Date</span>
            <span style="font-weight: 600; font-size: 16px; color: #333;">{{ today }}</span>
        </div>
    </div>

    <!-- Stats -->
    <!-- Stats -->
    <div class="stat-grid" style="margin-bottom: 48px;">
        <!-- Card 1: Total Orders -->
        <a href="/admin/orders" class="stat-card" style="display: block; text-decoration: none; background: white; padding: 24px; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.04); border: 1px solid rgba(0,0,0,0.04); transition: transform 0.2s; color: inherit;">
            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 16px;">
                <div>
                    <div style="font-size: 13px; text-transform: uppercase; letter-spacing: 1px; color: #888; font-weight: 600;">Total Orders</div>
                    <div style="font-size: 32px; font-weight: 700; color: #1a1a1a; margin-top: 8px;">{{ total_orders }}</div>
                </div>
                <!-- Icon Container: Flex centering ensures icon is strictly in middle -->
                <div style="width: 48px; height: 48px; background: #f0f7ff; border-radius: 8px; display: flex; align-items: center; justify-content: center; color: #0066cc; flex-shrink: 0;">
                    <i class="fa-solid fa-bag-shopping" style="font-size: 20px;"></i>
                </div>
            </div>
            <div style="font-size: 13px; color: #666; font-weight: 500; display: flex; align-items: center; gap: 6px;">
                Lifetime Orders
            </div>
        </a>

        <!-- Card 2: Revenue -->
        <a href="/admin/orders" class="stat-card" style="display: block; text-decoration: none; background: white; padding: 24px; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.04); border: 1px solid rgba(0,0,0,0.04); transition: transform 0.2s; color: inherit;">
            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 16px;">
                <div style="margin-right: 12px; min-width: 0;">
                    <div style="font-size: 13px; text-transform: uppercase; letter-spacing: 1px; color: #888; font-weight: 600;">Revenue</div>
                    <div style="font-size: 32px; font-weight: 700; color: #1a1a1a; margin-top: 8px; line-height: 1.2; word-wrap: break-word;">₹{{ revenue|floatformat:2 }}</div>
                </div>
                <div style="width: 48px; height: 48px; background: #fdf6e7; border-radius: 8px; display: flex; align-items: center; justify-content: center; color: #b78628; flex-shrink: 0;">
                    <i class="fa-solid fa-indian-rupee-sign" style="font-size: 20px; width: 20px; text-align: center;"></i>
                </div>
            </div>
            <div style="font-size: 13px; color: #666; font-weight: 500; display: flex; align-items: center; gap: 6px;">
                Total Earnings
            </div>
        </a>

        <!-- Card 3: Pending -->
        <a href="/admin/orders" class="stat-card" style="display: block; text-decoration: none; background: white; padding: 24px; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.04); border: 1px solid rgba(0,0,0,0.04); transition: transform 0.2s; color: inherit;">
            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 16px;">
                <div>
                    <div style="font-size: 13px; text-transform: uppercase; letter-spacing: 1px; color: #888; font-weight: 600;">Pending</div>
                    <div style="font-size: 32px; font-weight: 700; color: #1a1a1a; margin-top: 8px;">{{ pending_orders }}</div>
                </div>
                <div style="width: 48px; height: 48px; background: #fff0f0; border-radius: 8px; display: flex; align-items: center; justify-content: center; color: #d32f2f; flex-shrink: 0;">
                    <i class="fa-solid fa-clock" style="font-size: 20px;"></i>
                </div>
            </div>
            <div style="font-size: 13px; color: #d32f2f; font-weight: 500; display: flex; align-items: center; gap: 6px;">
                    Action required
            </div>
        </a>

        <!-- Card 4: Total Users -->
        <a href="/admin/users" class="stat-card" style="display: block; text-decoration: none; background: white; padding: 24px; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.04); border: 1px solid rgba(0,0,0,0.04); transition: transform 0.2s; color: inherit;">
            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 16px;">
                <div>
                    <div style="font-size: 13px; text-transform: uppercase; letter-spacing: 1px; color: #888; font-weight: 600;">Total Users</div>
                    <div style="font-size: 32px; font-weight: 700; color: #1a1a1a; margin-top: 8px;">{{ total_users }}</div>
                </div>
                <div style="width: 48px; height: 48px; background: #f3f0ff; border-radius: 8px; display: flex; align-items: center; justify-content: center; color: #673ab7; flex-shrink: 0;">
                    <i class="fa-solid fa-users" style="font-size: 20px;"></i>
                </div>
            </div>
            <div style="font-size: 13px; color: #666; font-weight: 500; display: flex; align-items: center; gap: 6px;">
                Active customer base
            </div>
        </a>
    </div>

    <!-- Recent Orders -->
    <div class="table-container" style="background: white; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.04); border: 1px solid rgba(0,0,0,0.04); overflow: hidden;">
        <div style="padding: 24px; border-bottom: 1px solid #f0f0f0; display: flex; justify-content: space-between; align-items: center;">
            <h3 style="font-size: 18px; font-weight: 600; margin: 0; color: #1a1a1a;">Recent Orders</h3>
            <a href="/admin/orders" style="font-size: 13px; color: #2C2420; font-weight: 600; text-decoration: none; display: flex; align-items: center; gap: 6px;">
                View All <i class="fa-solid fa-arrow-right"></i>
            </a>
        </div>
        
        {% if recent_orders %}
        <div style="overflow-x: auto;">
            <table class="premium-table" style="width: 100%; border-collapse: collapse;">
                <thead>
                    <tr style="background: #fafafa; border-bottom: 1px solid #eee;">
                        <th style="padding: 16px 24px; text-align: left; font-size: 12px; text-transform: uppercase; letter-spacing: 0.5px; color: #666;">Order ID</th>
                        <th style="padding: 16px 24px; text-align: left; font-size: 12px; text-transform: uppercase; letter-spacing: 0.5px; color: #666;">Customer</th>
                        <th style="padding: 16px 24px; text-align: left; font-size: 12px; text-transform: uppercase; letter-spacing: 0.5px; color: #666;">Amount</th>
                        <th style="padding: 16px 24px; text-align: left; font-size: 12px; text-transform: uppercase; letter-spacing: 0.5px; color: #666;">Status</th>
                        <th style="padding: 16px 24px; text-align: right; font-size: 12px; text-transform: uppercase; letter-spacing: 0.5px; color: #666;">Action</th>
                    </tr>
                </thead>
                <tbody>
                    {% for order in recent_orders %}
                    <tr style="border-bottom: 1px solid #f9f9f9; transition: background 0.2s;">
                        <td style="padding: 16px 24px; font-family: monospace; color: #444;">#{{ order.id|truncatechars:8 }}</td>
                        <td style="padding: 16px 24px; font-weight: 500;">
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <div style="width: 32px; height: 32px; background: #eee; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 12px; color: #666;">
                                    {{ order.user.first_name|default:'G'|slice:":1" }}
                                </div>
                                {{ order.user.name|default:'Guest User' }}
                            </div>
                        </td>
                        <td style="padding: 16px 24px; font-weight: 600; color: #1a1a1a;">₹{{ order.total_amount }}</td>
                        <td style="padding: 16px 24px;">
                            {% if order.status == 'PENDING' %}
                            <span style="background: #fff3e0; color: #e65100; padding: 4px 12px; border-radius: 20px; font-size: 12px; font-weight: 600;">Pending</span>
                            {% elif order.status == 'SHIPPED' %}
                            <span style="background: #e8f5e9; color: #2e7d32; padding: 4px 12px; border-radius: 20px; font-size: 12px; font-weight: 600;">Shipped</span>
                            {% elif order.status == 'DELIVERED' %}
                            <span style="background: #e3f2fd; color: #1565c0; padding: 4px 12px; border-radius: 20px; font-size: 12px; font-weight: 600;">Delivered</span>
                            {% else %}
                            <span style="background: #f5f5f5; color: #666; padding: 4px 12px; border-radius: 20px; font-size: 12px; font-weight: 600;">{{ order.get_status_display }}</span>
                            {% endif %}
                        </td>
                        <td style="padding: 16px 24px; text-align: right;">
                            <a href="/admin/orders/{{ order.id }}" style="color: #2C2420; text-decoration: none; padding: 8px; border-radius: 4px; transition: background 0.2s;">
                                <i class="fa-solid fa-ellipsis-vertical"></i>
                            </a>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        {% else %}
        <div style="padding: 60px; text-align: center; color: var(--text-secondary);">
            <i class="fa-solid fa-box-open" style="font-size: 48px; opacity: 0.2; margin-bottom: 16px;"></i>
            <p>No recent orders found</p>
        </div>
        {% endif %}
    </div>
{% endblock %}
